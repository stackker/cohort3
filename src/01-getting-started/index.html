<!-- 

    Insporation drawn from: https://www.w3schools.com/w3css/tryw3css_templates_parallax.htm#about

 -->

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" type="text/css" href="./index.css">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <title>FSD</title>

    <style>
        /* Stolen from W3Schools */
        #slab1 {
            border-color: gray solid 2px;
            /*border-collapse: collapse;*/
            width: 100%;
            font-size: 100%;
            font-size-adjust: 0.6;
        }

        #slab1 td,
        #slab1 th {
            border: 1px solid #ddd;
            padding: 8px;
        }

        #slab1 tr:nth-child(even) {
            background-color: #f2f2f2;
        }

        #slab1 tr:hover {
            background-color: #ddd;
        }

        #slab1 th {
            padding-top: 12px;
            padding-bottom: 12px;
            text-align: w3-center;
            background-color: rgb(14, 111, 143);
            color: white;

        }
    </style>

</head>

<body>

    <!-- Navbar (sit on top) -->
    <div class="w3-top">
        <div class="w3-bar" id="myNavbar">
            <a class="w3-bar-item w3-button w3-hover-black w3-hide-medium w3-hide-large w3-right"
                href="javascript:void(0);" onclick="toggleFunction()" title="Toggle Navigation Menu">
                <i class="fa fa-bars"></i>
            </a>
            <a href="#home" class="w3-bar-item w3-button">HOME</a>
            <a href="#about" class="w3-bar-item w3-button w3-hide-small"><i class="fa fa-user"></i> ABOUT</a>
            <a href="#idSize" class="w3-bar-item w3-button w3-hide-small"><i class="fa fa-th"></i> SIZE</a>
            <a href="https://www.evolveu.ca" class="w3-bar-item w3-button w3-hide-small" target="_blank"><i
                    class="fa fa-envelope"></i> CONTACT</a>
            <a href="#" class="w3-bar-item w3-button w3-hide-small w3-right w3-hover-red">
                <i class="fa fa-search"></i>
            </a>
        </div>

        <!-- Navbar on small screens -->
        <div id="navDemo" class="w3-bar-block w3-white w3-hide w3-hide-large w3-hide-medium">
            <a href="#about" class="w3-bar-item w3-button" onclick="toggleFunction()">ABOUT</a>
            <a href="#idSize" class="w3-bar-item w3-button" onclick="toggleFunction()">SIZE</a>
            <a href="https://www.evolveu.ca" class="w3-bar-item w3-button" onclick="toggleFunction()"
                target="_blank">CONTACT</a>
            <a href="#" class="w3-bar-item w3-button">SEARCH</a>
        </div>
    </div>

    <!-- -------------- First Parallax Image with Logo Text ----------- -->

    <div class="bgimg-1 w3-display-container w3-opacity-min" id="home">
        <div class="w3-display-middle" style="white-space:nowrap;">
            <div class="w3-center w3-padding-large w3-black w3-xlarge w3-wide w3-animate-opacity">
                WELCOME TO <br> Full Stack Development
            </div>
        </div>
    </div>

    <!-- Container (About The Tools) -->

    <div class="w3-content w3-container w3-padding-64 info-box" id="about">
        <h3 class="w3-center">ABOUT THE TOOLS & PRACTICES</h3>
        <p>
            Here, we describe at a high level the basic tools of the trade and best practices in using the tools. We are
            a little nervous about using the term “Best Practices”. There are many great tools and practices out there
            and “Best Practices” is a matter of
            opinion and are constantly changing. If you understand these tools and these practices, you are in a great
            position to continue your learning and finding better practices and better tools. You are just beginning a
            journey of learning that
            will last as long as your professional development career.
        </p>

        <ol>
            <li><b>Editor -</b> Where we spend all our time building. We suggest one of the two: <a
                    href="https://code.visualstudio.com/" target="_blank">Visual Studio Code</a> or <a
                    href="https://www.sublimetext.com/" target="_blank">Sublime Text</a>.

            </li>
            <li><b>Source Code Management -</b> According to <a href="https://en.wikipedia.org/wiki/Git"
                    target="_blank">Wikipedia</a> git is a distributed version-control system for tracking changes in
                source code during software development. It is designed
                for coordinating work among programmers, and it can also be used to track changes in any set of files.
                Its goals include speed, data integrity, and support for distributed, -linear workflows.
                <p>There is a tool <a href="https://git-scm.com/" target="_blank">git</a> and a development platform
                    called <a href="https://github.com" target="_blank">GitHub</a>. We will be using these extensively
                    throughout the program.</p>
            </li>
            <li><b>Code Organization -</b> How do we organize a project? How do we structure our files? </li>
            <li><b>Modular Design</b> How do we structure our code such that it is easy to read, update, test, and
                maintain?
            </li>
            <li><b>Developer Tools for Test Driven Development -</b> <a href="https://jestjs.io">Jest</a> is a
                delightful JavaScript Testing Framework with a focus on simplicity.</li>
        </ol>

    </div>


    <!-- ---------- Second Parallax Image with Size------------------ -->

    <div class="bgimg-2 w3-display-container w3-opacity-min">
        <div class="w3-display-middle">
            <span class="w3-xxlarge w3-text-white w3-wide">SIZE</span>
        </div>
    </div>

    <div class="w3-content w3-container w3-padding-64 w3-center" id="idSize">
        Did you know that =>
        <input id="idNumber" type="number"> is a <span id="idNumberSize">unknown</span> number?
        <p id="idNumberSizexx"></p>
    </div>

    <!-- ---------- Calculator------------------ -->
    <div style="background-color : lightblue" class="w3-content w3-container w3-padding-64 w3-center">
        <h1>My Calculator</h1>



        <h4> Display: <input type="text" name="Display" id="Display" oninput="sensor(event)" placeholder=0
                style="text-align : right; width : 350px;" ;>
            <span id="clear" input type="submit" onclick=ClearDisplay(Display.value)>Clear</span></h4>

        <br>
        <br>






    </div>

    <!-- ---------- Exercise - Canadian Taxes------------------ -->
    <div id="canadianTaxes" ;>


        <div class="w3-content w3-container w3-padding-64 w3-center" id="idTaxes" style=" background-color: gray;" ;>

            class="w3-display-middle">
            <span class="w3-xxlarge w3-text-white w3-wide">Canadian Tax Calculation </span>
        </div>
        <div class="w3-content w3-container w3-padding-64 info-box" id="about">
            <h1 class="w3-center">Federal tax on taxable income manual calculation chart</h1>



            <br> <br>
            <div style="width:100%;
                        outline: gray solid 2px;
                        padding: 5px;
                        margin: 2px;">
                <table id="slab1">
                    <tr>
                        <th>Description</th>
                        <th>Federal Tax Rate</th>
                        <th>Calc Amt.</th>
                        <th>Tax Amount</th>
                        <th>Reference</th>
                    </tr>
                    <tr>
                        <td>
                            Enter your taxable income from line 260 of your return. <span><strong>Click Elsewere to calculate</span></strong>
                        </td>
                        <td></td>
                        <td> <input type="numeric" name="s1line1" id="s1line1"  required = true min =0 onfocusout=calcDisplays1line()>
                        </td>
                        <td></td>
                        <td>Line 1</td>
                    </tr>
                    <tr>
                        <td> Base amount: $47,630 or less
                        </td>
                        <td id=s1rate1>15%</td>
                        <td>
                            <input type="numeric" name="s1line2" id="camounts1line2" value=0 readonly>
                        </td>

                        <td> <input type="numeric" name="s1line2" id="Tamounts1line2" value=0 readonly> </td>
                        <td>Line2 </td>
                    </tr>
                    <tr>
                        <td> Base amount: Over 47,630 up to $95,259
                        </td>

                        <td id=s2rate1>20.5%</td>
                        <td>
                            <input type="numeric" name="s1line2" id="camounts2line2" value=0 readonly>
                        </td>

                        <td> <input type="numeric" name="s1line2" id="Tamounts2line2" value=0 readonly>  </td>
                        <td>Line2 </td>
                    </tr>
                    <tr>
                        <td> Base amount: Over $95,259 to $147,667

                        </td>
                        <td id=s3rate1>26%</td>
                        <td>
                            <input type="numeric" name="s1line2" id="camounts3line2" value=0 readonly>
                        </td>

                        <td><input type="numeric" name="s1line2" id="Tamounts3line2" value=0 readonly> </td>
                        <td>Line2 </td>
                    </tr>

                    <tr>
                        <td> Base amount: Over 147,667 to $210,371
                        </td>
                        <td id=s3rate1>29%</td>
                        <td>
                            <input type="numeric" name="s1line2" id="camounts4line2" value=0 readonly>
                        </td>

                        <td><input type="numeric" name="s1line2" id="Tamounts4line2" value=0 readonly> </td>
                        <td>Line2 </td>
                    </tr>

                    <tr>
                        <td> Base amount: Over $210,371
                        </td>
                        <td id=s3rate1>33%</td>
                        <td>
                            <input type="numeric" name="s1line2" id="camounts5line2" value=0 readonly>
                        </td>

                        <td>
                            <input type="numeric" name="s1line2" id="Tamounts5line2" value=0 readonly>
                        </td>
                        <td>Line2 </td>
                    </tr>



                    <tr>
                        <td>Total Tax on the amount from line 2
                        </td>

                        <td></td>
                        <td></td>
                        <td><input type="numeric" name="s1line6" id="totTaxAmt" readonly></td>
                        <td>Line 6</td>
                    </tr>

                </table>


            </div>
            <br>


        </div>

        <div>
        </div>
    </div>



    <!-- Footer -->
    <footer class="w3-center w3-black w3-padding-64 w3-opacity w3-hover-opacity-off">
        <a href="#home" class="w3-button w3-light-grey"><i class="fa fa-arrow-up w3-margin-right"></i>To the top</a>
        <div class="w3-xlarge w3-section">
            <i class="fa fa-facebook-official w3-hover-opacity"></i>
            <i class="fa fa-instagram w3-hover-opacity"></i>
            <i class="fa fa-snapchat w3-hover-opacity"></i>
            <i class="fa fa-pinterest-p w3-hover-opacity"></i>
            <i class="fa fa-twitter w3-hover-opacity"></i>
            <i class="fa fa-linkedin w3-hover-opacity"></i>
        </div>
        <p>Powered by <a href="https://www.w3schools.com/w3css/default.asp" title="W3.CSS" target="_blank"
                class="w3-hover-text-green">w3.css</a></p>
    </footer>








    <script type="module" src=".\scripts\main.js"></script>

    <script>
        // Change style of navbar on scroll
        window.onscroll = function () {
            myFunction()
        };

        function myFunction() {
            var navbar = document.getElementById("myNavbar");
            if (document.body.scrollTop > 100 || document.documentElement.scrollTop > 100) {
                navbar.className = "w3-bar" + " w3-card" + " w3-animate-top" + " w3-white";
            } else {
                navbar.className = navbar.className.replace(" w3-card w3-animate-top w3-white", "");
            }
        }

        // Used to toggle the menu on small screens when clicking on the menu button
        function toggleFunction() {
            var x = document.getElementById("navDemo");
            if (x.className.indexOf("w3-show") == -1) {
                x.className += " w3-show";
            } else {
                x.className = x.className.replace(" w3-show", "");
            }
        }



    </script>
    <!--  Script for CALCULATOR -->
    <script>
        // Initialize Set Calculator to zero
        window.onload = function () {
            document.getElementById("Display").value = "";
            // console.log("loaded");
        };

        function ClearDisplay() {
            document.getElementById("Display").value = "";

            // console.log("Cleared from Click");
        };


        function sensor(keystroke) {
            let resetDisplay = "OFF";
            let operands = ["/", "*", "-", "+"];

            if (keystroke.data === "=") {
                let str1 = document.getElementById("Display").value;
                // strEval = str1;
                let strEval = str1.slice(0, -1) // <-  Drops the "=" entered

                document.getElementById("Display").value = strEval;
                console.log("Inside if ", strEval);
                //  let result = functions.expression(strEval);

                // Optput  result to screen.
                let result = expression(strEval);
                document.getElementById("Display").value = result;
                resetDisplay = "ON";

            }
            else {

                if (resetDisplay === "OFF") {
                    //     document.getElementById("Display").value = keystroke.data;
                    //     resetDisplay = "OFF";

                    console.log(resetDisplay, keystroke.data);
                };
            }


        };

       

        function expression(exprn) {

            let answer = eval(exprn);
            /* console.log(answer); */
            //console.log("Inside exprn ", typeof (answer)); 


            return answer;
        }



    </script>

    <script>
        // For Canadian Tax Calculation

        function calcDisplays1line() {
           // alert("from calcDisplay");
            var arrSlab = [0, 47630, 95259, 147667, 210371]
            var ratepcent = [15, 20.5, 26, 29, 33];

            // Anount Slab fields
            let arrId = ["camounts1line2", "camounts2line2", "camounts3line2", "camounts4line2", "camounts5line2"]

            // Tax Amt Slab fields
            let taxid = ["Tamounts1line2", "Tamounts2line2", , "Tamounts4line2", "Tamounts5line2"];

            // Total Tax due field


            var income260 = Number(document.getElementById("s1line1").value)

            totTaxAmt.value = calcFederalTax(income260, arrSlab, arrId, taxid, ratepcent);



        };

        function calcFederalTax(income, ArrSlab, arrId, taxid, ratepcent) {
            let cAmtSlab = [];
            let islastSlab = false;
            let tAmtSlab = [];

            noOfSlabs = ArrSlab.length;

            let remIncome = income;

            for (i = 0; i < noOfSlabs; i++) {
                remIncome = income - ArrSlab[i];
                if (i === (noOfSlabs - 1)) {
                    islastSlab = true;
                };
                console.log("loop:", i, remIncome, ArrSlab[i], income, islastSlab);

                cAmtSlab[i] = calcSlab(remIncome, ArrSlab[i], ArrSlab[i + 1], islastSlab);

                console.log("cAmtSlab :", cAmtSlab[i], ArrSlab[i], ArrSlab[i + 1]);


                // add calcTax fn here
                tAmtSlab[i] = (cAmtSlab[i] * ratepcent[i] / 100);


                //"camounts1line2" - calculated income slabs in display
                cAmountsxline2 = `camounts${(i + 1)}line2`;
                console.log("cAmountsxline2: ", cAmountsxline2);
                document.getElementById(cAmountsxline2).value = cAmtSlab[i].toFixed(2);

                // "Tamounts1line2" -  calculated Tax Amounts for slabs in display
                tAmtsxline2 = `Tamounts${(i + 1)}line2`;
                console.log(" tAmtsxline2 = ", tAmtsxline2);
                document.getElementById(tAmtsxline2).value = tAmtSlab[i].toFixed(2);


            }
            return idtotTaxAmt = tAmtSlab.reduce((totTaxAmt, taxAmt) => {
                return (Number(totTaxAmt) + Number(taxAmt)).toFixed(2);
            });
        };




        function calcSlab(slabincome, slab, nextslab, last) {
            let calcDiff = 0;
            let cAmtSlab = 0;

            let thisSlabAmt = nextslab - slab;
            // Takes vales from Arrrays and processes them idividually)
            // console.log("calcSlab begin", slabincome, slab, nextslab, last, thisSlabAmt)
            if (last === true) {
                // console.log("in if ", slabincome, slab, nextslab, last, thisSlabAmt);
                if (slabincome <= 0) {
                    cAmtSlab = 0;
                    return cAmtSlab;
                } else {
                    cAmtSlab = slabincome;
                    return cAmtSlab;
                }



            }


            else {
                // console.log("Else", slabincome, slab, nextslab, last, thisSlabAmt)
                calcDiff = slabincome;

                if ((0 < slabincome) && (slabincome < thisSlabAmt)) {
                    // console.log("SlI", slabincome, slab, nextslab, last, thisSlabAmt);
                    cAmtSlab = slabincome;
                    return cAmtSlab;
                }

                else if (slabincome >= thisSlabAmt) {
                    cAmtSlab = nextslab - slab;
                    // console.log("i>=sl", slabincome, slab, nextslab, thisSlabAmt, cAmtSlab);
                    return cAmtSlab;
                }

                else {
                    cAmtSlab = 0;
                    return cAmtSlab;
                }

            }
            // return cAmtSlab;

        };
    </script>

</body>

</html>